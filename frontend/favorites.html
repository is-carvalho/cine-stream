<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>CineStream</title>
    <link rel="stylesheet" type="text/css" href="./favorites.css"> 
</head>
<body>
    <header class="page-header">
        <h1>Minha Lista de Favoritos</h1>
        <p class="menu">
            <a href="catalog.html">Voltar ao Catálogo</a>
        </p>
    </header>

    <ul id="favorites-list">
        <li class="loading-message">Carregando favoritos...</li>
    </ul>

    <script>
        const API_FAVORITES_URL = 'http://localhost:3001/api/favorites';
        
        async function loadFavorites() {
            const list = document.getElementById('favorites-list');
            try {
                const response = await fetch(API_FAVORITES_URL);
                if (!response.ok) throw new Error('Erro ao carregar favoritos');

                const favorites = await response.json();
                
                list.innerHTML = '';
                if (favorites.length === 0) {
                    list.innerHTML = '<li class="empty-message">Você não possui favoritos na sua lista.</li>';
                    return;
                }

                favorites.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'media-card';
                    
                    li.innerHTML = `
                        <a href="details.html?id=${item.id}" 
                           data-id="${item.id}" 
                           data-title="${item.title}">
                            <h3>${item.title}</h3>
                            <p class="card-meta">${item.type || 'Filme/Série'} | ${item.year}</p>
                            <p class="card-rating">Avaliação: ${item.averageRating || 'S/N'}</p>
                        </a>
                    `;
                    list.appendChild(li);
                });

            } catch (error) {
                list.innerHTML = `<li class="error-message" style="color: red;">Erro ao carregar: ${error.message}</li>`;
            }
        }
        loadFavorites();
    </script>
</body>
</html>